/*
    * SKRYPT TWORZACY TABELE DO PROJEKTU Z TSQL
    * PRZEDMIOT SBD
    * MICHAL CZECH 2020
*/

-- usuwanie tabel jezeli istnieja 
IF OBJECT_ID('Osoba') IS NOT NULL
	DROP TABLE Osoba;
Go

IF OBJECT_ID('Pracownik') IS NOT NULL
	DROP TABLE Pracownik;
Go

IF OBJECT_ID('Zamowienie') IS NOT NULL
	DROP TABLE Zamowienie;
Go

IF OBJECT_ID('Dostawca') IS NOT NULL
	DROP TABLE Dostawca;
Go

IF OBJECT_ID('Kelner') IS NOT NULL
	DROP TABLE Kelner;
Go

IF OBJECT_ID('Klient') IS NOT NULL
	DROP TABLE Klient;
Go

IF OBJECT_ID('Pomocnik') IS NOT NULL
	DROP TABLE Pomocnik;
Go

IF OBJECT_ID('Kucharz') IS NOT NULL
	DROP TABLE Kucharz;
Go

CREATE TABLE Dostawca (
    Id_dostawca int  NOT NULL,
    Numer_zamowienia int,
    CONSTRAINT Dostawca_pk PRIMARY KEY  (Id_dostawca)
);

CREATE TABLE Kelner (
    Id_kelner int  NOT NULL,
    Data_zatrudnienia date  NOT NULL,
    CONSTRAINT Kelner_pk PRIMARY KEY  (Id_kelner)
);

CREATE TABLE Klient (
    Id_klient int  NOT NULL,
    Numer_telefonu char(9)  NOT NULL,
    CONSTRAINT Klient_pk PRIMARY KEY  (Id_klient)
);

CREATE TABLE Kucharz (
    Id_kucharz int  NOT NULL,
    Doswiadczenie int  NOT NULL,
    Pensja int  NOT NULL,
    CONSTRAINT Kucharz_pk PRIMARY KEY  (Id_kucharz)
);

CREATE TABLE Osoba (
    Id_osoba int  NOT NULL,
    Imie varchar(30)  NOT NULL,
    Nazwisko varchar(30)  NOT NULL,
    CONSTRAINT Osoba_pk PRIMARY KEY  (Id_osoba)
);

CREATE TABLE Pomocnik (
    Id_pomocnik int  NOT NULL,
    doswiadczenie int  NOT NULL,
    Id_kucharz int  NOT NULL,
    CONSTRAINT Pomocnik_pk PRIMARY KEY  (Id_pomocnik)
);

CREATE TABLE Pracownik (
    Id_pracownik int  NOT NULL,
    Data_zatrudnienia date  NOT NULL,
    Pensja int  NOT NULL,
    CONSTRAINT Pracownik_pk PRIMARY KEY  (Id_pracownik)
);

CREATE TABLE Zamowienie (
    Id_zamowienia int  NOT NULL,
    Data_zamowienia date  NOT NULL,
    Koszt_zamowienia int  NOT NULL,
    Nazwa_zamowienia varchar(20)  NOT NULL,
    Id_klient int  NOT NULL,
    Id_dostawca int  NOT NULL,
    Id_pomocnik int  NOT NULL,
    Id_kucharz int  NOT NULL,
    Id_kelner int  NOT NULL,
    CONSTRAINT Zamowienie_pk PRIMARY KEY  (Id_zamowienia)
);

-- foreign keys
-- Reference: Klient_Osoba (table: Klient)
ALTER TABLE Klient ADD CONSTRAINT Klient_Osoba
    FOREIGN KEY (Id_klient)
    REFERENCES Osoba (Id_osoba);

-- Reference: Pomocnik_Kucharz (table: Pomocnik)
ALTER TABLE Pomocnik ADD CONSTRAINT Pomocnik_Kucharz
    FOREIGN KEY (Id_kucharz)
    REFERENCES Kucharz (Id_kucharz);

-- Reference: Pracownik_Osoba (table: Pracownik)
ALTER TABLE Pracownik ADD CONSTRAINT Pracownik_Osoba
    FOREIGN KEY (Id_pracownik)
    REFERENCES Osoba (Id_osoba);

-- Reference: Zamowienia_Dostawca (table: Zamowienie)
ALTER TABLE Zamowienie ADD CONSTRAINT Zamowienia_Dostawca
    FOREIGN KEY (Id_dostawca)
    REFERENCES Dostawca (Id_dostawca);

-- Reference: Zamowienia_Kelner (table: Zamowienie)
ALTER TABLE Zamowienie ADD CONSTRAINT Zamowienia_Kelner
    FOREIGN KEY (Id_kelner)
    REFERENCES Kelner (Id_kelner);

-- Reference: Zamowienia_Klient (table: Zamowienie)
ALTER TABLE Zamowienie ADD CONSTRAINT Zamowienia_Klient
    FOREIGN KEY (Id_klient)
    REFERENCES Klient (Id_klient);

-- Reference: Zamowienia_Kucharz (table: Zamowienie)
ALTER TABLE Zamowienie ADD CONSTRAINT Zamowienia_Kucharz
    FOREIGN KEY (Id_kucharz)
    REFERENCES Kucharz (Id_kucharz);

-- Reference: Zamowienia_Pomocnik (table: Zamowienie)
ALTER TABLE Zamowienie ADD CONSTRAINT Zamowienia_Pomocnik
    FOREIGN KEY (Id_pomocnik)
    REFERENCES Pomocnik (Id_pomocnik);

-- Wstawianie wartosci do tabeli
INSERT INTO OSOBA VALUES (0, 'BENEDYKT', 'SOKOL');
INSERT INTO OSOBA VALUES (1, 'TOMASZ', 'GRABOWSKI')
INSERT INTO OSOBA VALUES (2, 'MARTYNA', 'OLSZEWSKA')
INSERT INTO OSOBA VALUES (3, 'FRYDERYK', 'KUCHARSKI')
INSERT INTO OSOBA VALUES (4, 'KAROLINA', 'ZAJAC')
INSERT INTO OSOBA VALUES (5, 'MARIUSZ', 'PAWLAK')
INSERT INTO OSOBA VALUES (6, 'LECH', 'WALCZAK')
INSERT INTO OSOBA VALUES (7, 'NATASZA', 'KALINOWSKA')
INSERT INTO OSOBA VALUES (8, 'WISLAWA', 'KWIATKOWSKA')
INSERT INTO OSOBA VALUES (9, 'SZYMON', 'DABROWSKI')
INSERT INTO OSOBA VALUES (10, 'PATRYCJA', 'SAWICKA')
INSERT INTO OSOBA VALUES (11, 'WLADYSLAW', 'NOWAKOWSKI')
INSERT INTO OSOBA VALUES (12, 'JAN', 'KOWALSKI')
INSERT INTO OSOBA VALUES (13, 'WIESLAW', 'KOWALCZYK')
INSERT INTO OSOBA VALUES (14, 'MARIAN', 'CHMIEL')
INSERT INTO OSOBA VALUES (15, 'EWA', 'ADAMSKA')
INSERT INTO OSOBA VALUES (16, 'WOJCIECH', 'ZAJAC')
INSERT INTO OSOBA VALUES (17, 'STANISLAW', 'WIECZOREK')
INSERT INTO OSOBA VALUES (18, 'KAZIMIERZ', 'CHMIELEWSKI')
INSERT INTO OSOBA VALUES (19, 'ANDRZEJ', 'ADAMSKI')
INSERT INTO OSOBA VALUES (20, 'MACIEJ', 'SAWICKI')
INSERT INTO OSOBA VALUES (21, 'PATRYK', 'KOWALCZYK')
INSERT INTO OSOBA VALUES (22, 'ZDZISLAW', 'GORSKI')
INSERT INTO OSOBA VALUES (23, 'WACLAWA', 'RUTKOWSKA')
INSERT INTO OSOBA VALUES (24, 'ZOFIA', 'WOZNIAK')
INSERT INTO OSOBA VALUES (25, 'ANTONI', 'KOZLOWSKI')
INSERT INTO OSOBA VALUES (26, 'JOANNA', 'KAMINSKA')
INSERT INTO OSOBA VALUES (27, 'KRZYSZTOF', 'ZAJAC')
INSERT INTO OSOBA VALUES (28, 'HIERONIM', 'OLSZEWSKI')
INSERT INTO OSOBA VALUES (29, 'FERDYNAND', 'OSTROWSKI')
INSERT INTO OSOBA VALUES (30, 'JULIUSZ', 'PAWLOWSKI')
INSERT INTO OSOBA VALUES (31, 'GERTRUDA', 'MALINA')
INSERT INTO OSOBA VALUES (32, 'KLAUDIUSZ', 'MICHALSKI')
INSERT INTO OSOBA VALUES (33, 'ADAM', 'CZARNECKI')
INSERT INTO OSOBA VALUES (34, 'JADWIGA', 'TOMASZEWSKA')
INSERT INTO OSOBA VALUES (35, 'ANNA', 'KOWALSKA')

INSERT INTO KUCHARZ VALUES (0, 2, 1000);
INSERT INTO KUCHARZ VALUES (1, 20, 2000);
INSERT INTO KUCHARZ VALUES (2, 10, 3000);
INSERT INTO KUCHARZ VALUES (3, 15, 4000);
INSERT INTO KUCHARZ VALUES (4, 5, 5000);

INSERT INTO PRACOWNIK VALUES (5, '2019-12-10', 1000);
INSERT INTO PRACOWNIK VALUES (6, '2020-05-12', 4000);
INSERT INTO PRACOWNIK VALUES (7, '2018-01-22', 3000);
INSERT INTO PRACOWNIK VALUES (8, '2020-04-20', 5000);
INSERT INTO PRACOWNIK VALUES (9, '2019-03-14', 4000);
INSERT INTO PRACOWNIK VALUES (10, '2020-02-29', 2000);
INSERT INTO PRACOWNIK VALUES (11, '2018-08-14', 6000);

INSERT INTO DOSTAWCA VALUES (12, 1);
INSERT INTO DOSTAWCA VALUES (13, 2);
INSERT INTO DOSTAWCA VALUES (14, 0);
INSERT INTO DOSTAWCA VALUES (15, 3);
INSERT INTO DOSTAWCA VALUES (16, 5);

INSERT INTO KELNER VALUES (17, '2019-12-10');
INSERT INTO KELNER VALUES (18, '2020-05-12');
INSERT INTO KELNER VALUES (19, '2018-01-22');
INSERT INTO KELNER VALUES (20, '2020-04-20');
INSERT INTO KELNER VALUES (21, '2020-04-20');
INSERT INTO KELNER VALUES (22, '2018-08-14');

INSERT INTO KLIENT VALUES (23, '727239507');
INSERT INTO KLIENT VALUES (24, '724914324');
INSERT INTO KLIENT VALUES (25, '725279062');
INSERT INTO KLIENT VALUES (26, '603670761');
INSERT INTO KLIENT VALUES (27, '536081564');
INSERT INTO KLIENT VALUES (28, '537839898');
INSERT INTO KLIENT VALUES (29, '725594523');

INSERT INTO POMOCNIK VALUES (30, 21, 0);
INSERT INTO POMOCNIK VALUES (31, 2, 1);
INSERT INTO POMOCNIK VALUES (32, 14, 1);
INSERT INTO POMOCNIK VALUES (33, 20, 2);
INSERT INTO POMOCNIK VALUES (34, 5, 3);
INSERT INTO POMOCNIK VALUES (35, 10, 2);

INSERT INTO ZAMOWIENIE VALUES (0, '2018-07-30', 10, 'NAPOJE', 23, 12, 30, 0, 17);
INSERT INTO ZAMOWIENIE VALUES (1, '2018-07-30', 20, 'JEDZENIE', 23, 13, 31, 4, 17);
INSERT INTO ZAMOWIENIE VALUES (2, '2018-06-26', 40, 'PRZEKASKI', 25, 14, 32, 2, 19);
INSERT INTO ZAMOWIENIE VALUES (3, '2018-10-31', 20, 'NAPOJE GORACE', 25, 13, 31, 1, 19);
INSERT INTO ZAMOWIENIE VALUES (4, '2019-06-04', 40, 'NAPOJE', 25, 13, 33, 0, 20);
INSERT INTO ZAMOWIENIE VALUES (5, '2020-01-06', 70, 'NAPOJE GORACE', 26, 14, 34, 3, 21);
INSERT INTO ZAMOWIENIE VALUES (6, '2020-01-10', 10, 'JEDZENIE', 27, 14, 32, 1, 17);
INSERT INTO ZAMOWIENIE VALUES (7, '2018-02-25', 30, 'PRZEKASKI', 28, 15, 35, 2, 18);
INSERT INTO ZAMOWIENIE VALUES (8, '2018-10-23', 50, 'PRZEKASKI', 23, 12, 35, 0, 18);
INSERT INTO ZAMOWIENIE VALUES (9, '2018-12-28', 60, 'ALKOHOLE', 23, 13, 31, 1, 17);
INSERT INTO ZAMOWIENIE VALUES (10, '2019-07-10', 80, 'ALKOHOLE', 26, 14, 32, 0, 19);
INSERT INTO ZAMOWIENIE VALUES (11, '2020-01-13', 60, 'NALEWKI', 23, 15, 32, 1, 20);

COMMIT;